@model time_waitting.Models.timeWaittingModel

@{
    ViewData["Title"] = "Add";
    Layout = "~/Views/Shared/_Layout.cshtml";
    IEnumerable<cmonth> displaydata = ViewData["cmonth"] as IEnumerable<cmonth>;

    //int oldyear = 2562;
    int years = (int)ViewData["Date2"];
}
<style>
    table, th, td {
        border: 1px solid;
        border-collapse: collapse;
    }
</style>

<script type="text/javascript">
    function checkData() {
        if (document.getElementById('t_month').value == 0) {
            alert('กรุณากรอกข้อมูลเดือน ให้ถูกต้อง ');
            return false;
        }
        if (document.getElementById('t_year').value == 0) {
            alert('กรุณากรอกข้อมูลปีงบประมาณ ให้ถูกต้อง ');
            return false;
        }
        var op1 = document.getElementById("type");
        var op2 = document.getElementById("type2");
        if (op1.checked == false && op2.checked == false) {
            alert('กรุณาเลือกประเภทของผู้ป่วย');
            return false;
        }
        if (document.getElementById('t_newpatien').value == "") {
            alert('กรุณากรอกจำนวนผู้ป่วยนอกใหม่ ข้อมูลให้ครบและถูกต้อง ');
            document.getElementById("t_newpatien").focus();
            return false;
        }
        if (document.getElementById('t_oldpatien').value == "") {
            alert('กรุณากรอกจำนวนผู้ป่วยนอกเก่า ข้อมูลให้ครบและถูกต้อง ');
            document.getElementById("t_oldpatien").focus();
            return false;
        }
        if (document.getElementById('t_card').value == "") {
            alert('กรุณากรอกข้อมูลให้ครบและถูกต้อง ');
            document.getElementById("t_card").focus();
            return false;
        }
        if (document.getElementById('t_screen').value == "") {
            alert('กรุณากรอกข้อมูลให้ครบและถูกต้อง ');
            document.getElementById("t_screen").focus();
            return false;
        } if (document.getElementById('t_waitdoc').value == "") {
            alert('กรุณากรอกข้อมูลให้ครบและถูกต้อง ');
            document.getElementById("t_waitdoc").focus();
            return false;
        } if (document.getElementById('t_roomdoc').value == "") {
            alert('กรุณากรอกข้อมูลให้ครบและถูกต้อง ');
            document.getElementById("t_roomdoc").focus();
            return false;
        } if (document.getElementById('t_prescription').value == "") {
            alert('กรุณากรอกข้อมูลให้ครบและถูกต้อง ');
            document.getElementById("t_prescription").focus();
            return false;
        } if (document.getElementById('t_waitmed').value == "") {
            alert('กรุณากรอกข้อมูลให้ครบและถูกต้อง ');
            document.getElementById("t_waitmed").focus();
            return false;
        } if (document.getElementById('t_med').value == "") {
            alert('กรุณากรอกข้อมูลให้ครบและถูกต้อง ');
            document.getElementById("t_med").focus();
            return false;
        } if (document.getElementById('t_oldmed').value == "") {
            alert('กรุณากรอกข้อมูลให้ครบและถูกต้อง ');
            document.getElementById("t_oldmed").focus();
            return false;
        } if (document.getElementById('t_inter').value == "") {
            alert('กรุณากรอกข้อมูลให้ครบและถูกต้อง ');
            document.getElementById("t_inter").focus();
            return false;
        } if (document.getElementById('t_admit').value == "") {
            alert('กรุณากรอกข้อมูลให้ครบและถูกต้อง ');
            document.getElementById("t_admit").focus();
            return false;
        } if (document.getElementById('t_prepare_admit').value == "") {
            alert('กรุณากรอกข้อมูลให้ครบและถูกต้อง ');
            document.getElementById("t_prepare_admit").focus();
            return false;
        }
    }

    function checkOther() {
        document.getElementById("t_newpatien").readOnly = false;
        document.getElementById("t_oldpatien").readOnly = true;
        document.getElementById("t_oldpatien").value = 0;
        document.getElementById("t_newpatien").value = "";
    }

    function checkOther2() {
        document.getElementById("t_newpatien").readOnly = true;
        document.getElementById("t_oldpatien").readOnly = false;
        document.getElementById("t_newpatien").value = 0;
        document.getElementById("t_oldpatien").value = "";
    }

    //function chkConfirm() {
    //    if (confirm('Submit Form') == true) {
    //        return true;
    //    }
    //    else {
    //        return false;
    //    }
    //}
</script>

<div class="card mt-5">
    <div class="card-header">
        <h4 class="card-title">แบบรายงานข้อมูลลดระยะเวลาการบริการผู้ป่วยจิตเวชของหน่วยบริการจิตเวช</h4>
    </div>
    <div class="card-body">
        <div class="breadcomb-area">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="breadcomb-list">
                            <form asp-action="Add">
                                <div class="row">
                                    <div>
                                        <label class="control-label">หน่วยงาน: @ViewData["hospname"]</label>
                                        <br>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group row align-items-center">
                                                <div class="col-lg-3 col-3">
                                                    <label class="col-form-label">ข้อมูลเดือน: </label>
                                                </div>
                                                <div class="col-lg-9 col-9">
                                                    <input class="form-control" type="text"  value="@ViewData["Month"].ToString()"  readonly />
                                                        <input class="form-control" type="hidden" asp-for="t_month" value="@ViewData["MonthNum"]"/>
                                                    @*<select class="form-select" asp-for="t_month" id="t_month">
                                                        <option value="0" disabled selected>กรุณาเลือก</option>
                                                        @foreach (var item in displaydata)
                                                        {
                                                            @if (item.m_id > 9)
                                                            {
                                                                <option value="@item.m_id">@item.m_name</option>
                                                            }

                                                        }
                                                    </select>*@
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group row align-items-center">
                                                <div class="col-lg-4 col-4">
                                                    <label class="col-form-label">ปีงบประมาณ: </label>
                                                </div>
                                                <div class="col-lg-8 col-8">
                                                    <input class="form-control" type="text" asp-for="t_year" value="@ViewData["date2"].ToString()" id="t_year" readonly />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group row align-items-center">
                                                <div class="col-lg-4 col-4">
                                                    <label class="col-form-label">ประเภทผู้ป่วย: </label>
                                                </div>
                                                <div class="col-lg-8 col-8">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" asp-for="type" name="type"
                                                               id="type" value="2" onclick="checkOther();">
                                                        <label class="form-check-label" for="flexRadioDefault1">ผู้ป่วยนอกใหม่</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" asp-for="type" name="type"
                                                               id="type2" value="1" onclick="checkOther2();">
                                                        <label class="form-check-label" for="flexRadioDefault1">ผู้ป่วยนอกเก่า</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <table class="table" border="1">
                                        <thead>
                                            <tr>
                                                <th class="text-center">ข้อ</th>
                                                <th class="text-center">รายการ</th>
                                                <th class="text-center">หน่วยนับ</th>
                                                <th class="text-center">จำนวน</th>

                                            </tr>
                                        </thead>
                                        <tr>
                                            <td rowspan="3" class="text-center">1</td>
                                            <td>จำนวนผู้ป่วยนอกทั้งหมด</td>
                                            <td rowspan="3" class="text-center">ราย</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>1.1 <label asp-for="t_newpatien" class="control-label"></label></td>
                                            <td>
                                                <input asp-for="t_newpatien" class="form-control" id="t_newpatien" />
                                                <span asp-validation-for="t_newpatien" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>1.2 <label asp-for="t_oldpatien" class="control-label"></label></td>
                                            <td>
                                                <input asp-for="t_oldpatien" class="form-control" id="t_oldpatien" readonly />
                                                <span asp-validation-for="t_oldpatien" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td rowspan="7" class="text-center">2</td>
                                            <td>ระยะเวลาการให้บริการแต่ละขั้นตอนในแผนกผู้ป่วยนอก</td>
                                            <td rowspan="7" class="text-center">นาที</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>2.1 <label asp-for="t_card" class="control-label"></label></td>
                                            <td>
                                                <input asp-for="t_card" class="form-control" id="t_card" />
                                                <span asp-validation-for="t_card" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>2.2 <label asp-for="t_screen" class="control-label"></label></td>
                                            <td>
                                                <input asp-for="t_screen" class="form-control" id="t_screen" />
                                                <span asp-validation-for="t_screen" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>2.3 <label asp-for="t_waitdoc" class="control-label"></label></td>
                                            <td>
                                                <input asp-for="t_waitdoc" class="form-control" id="t_waitdoc" />
                                                <span asp-validation-for="t_waitdoc" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>2.4 <label asp-for="t_roomdoc" class="control-label"></label></td>
                                            <td>
                                                <input asp-for="t_roomdoc" class="form-control" id="t_roomdoc" />
                                                <span asp-validation-for="t_roomdoc" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>2.5 <label asp-for="t_prescription" class="control-label"></label></td>
                                            <td>
                                                <input asp-for="t_prescription" class="form-control" id="t_prescription" />
                                                <span asp-validation-for="t_prescription" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>2.6 <label asp-for="t_waitmed" class="control-label"></label></td>
                                            <td>
                                                <input asp-for="t_waitmed" class="form-control" id="t_waitmed" />
                                                <span asp-validation-for="t_waitmed" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td rowspan="3" class="text-center">3</td>
                                            <td>ระยะเวลาการรับยาเดิม</td>
                                            <td rowspan="3" class="text-center">นาที</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>3.1 <label asp-for="t_med" class="control-label"></label></td>
                                            <td>
                                                <input asp-for="t_med" class="form-control" id="t_med" />
                                                <span asp-validation-for="t_med" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>3.2 <label asp-for="t_oldmed" class="control-label"></label></td>
                                            <td>
                                                <input asp-for="t_oldmed" class="form-control" id="t_oldmed" />
                                                <span asp-validation-for="t_oldmed" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-center">4</td>
                                            <td><label asp-for="t_inter" class="control-label"></label></td>
                                            <td class="text-center">นาที</td>
                                            <td>
                                                <input asp-for="t_inter" class="form-control" id="t_inter" />
                                                <span asp-validation-for="t_inter" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td rowspan="3" class="text-center">5</td>
                                            <td>ผู้ป่วยใน</td>
                                            <td class="text-center"></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>5.1 <label asp-for="t_admit" class="control-label"></label></td>
                                            <td class="text-center">ราย</td>
                                            <td>
                                                <input asp-for="t_admit" class="form-control" id="t_admit" />
                                                <span asp-validation-for="t_admit" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5.2 <label asp-for="t_prepare_admit" class="control-label"></label></td>
                                            <td class="text-center">นาที</td>
                                            <td>
                                                <input asp-for="t_prepare_admit" class="form-control" id="t_prepare_admit" />
                                                <span asp-validation-for="t_prepare_admit" class="text-danger"></span>
                                            </td>
                                        </tr>
                                    </table>
                                </div>

                                <div class="row">
                                    <span class="text-danger text-center">@ViewData["ErrorInsert"]</span>
                                    <div class="col-md-5">
                                    </div><div class="col-md-2">
                                        <div class="form-group">
                                            <input type="hidden" asp-for="t_user" value="@ViewData[" User"]" />
                                            <button type="submit" class="btn btn-success" data-toggle="modal"
                                                    data-target="#SaveModal" onclick="JavaScript: return checkData();">
                                                บันทึก
                                            </button>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                    </div>
                                </div>
                            </form>
                            <div>
                                <a onclick="window.history.back()" href="#"><< ย้อนกลับ</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@*<div id="SaveModal" class="modal modal-child fade addNewRequestModal" tabindex="-1" role="dialog"
         aria-labelledby="myLargeModalLabel" aria-hidden="true" data-modal-parent="#ViewDetailModal">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">อนุมัติการแก้ไข</h4>
                </div>
                <div class="modal-body">
                    <div id="t_month2"></div>
                    <div class="modal-footer">
                        <input type="hidden" name="t_id" id="t_id" />
                        <input type="submit" class="btn btn-success" value="บันทึก">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">ปิด</button>
                    </div>
                </div>
            </div>
        </div>
    </div>*@

@*<script>
        $(document).ready(function () {

            $("body").on("click", ".save", function (event) {

                var uid = $(this).attr("id");
                $('#t_id').val(uid);
                document.getElementById("t_month2").innerHTML = document.getElementById('t_month').value;//$(this).attr("t_month");
            });

        });
    </script>*@
@*<script>
        $(document).ready(function () {

            $("body").on("click", ".save", function (event) {

                var uid = $(this).attr("id");
                $('#t_id').val(uid);
                document.getElementById("t_month2").innerHTML = document.getElementById('t_month').value;//$(this).attr("t_month");
            });

        });
    </script>*@
